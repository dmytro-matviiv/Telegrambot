# Changelog

## [Unreleased]

### Changed
- **Заміна англомовних джерел на українські**: Замінено всі англомовні джерела новин на українські:
  - BBC World → Наві України (navi.ua)
  - Reuters World → Еспресо (espreso.tv)
  - CNN World → 24 Канал (24tv.ua)
  - TechCrunch → AIN.UA (ain.ua)
  - Wired Technology → Доун (dou.ua)
  - The Verge → ITC.ua (itc.ua)
  - People → Клік (clutch.ua)
  - Defense News → Мілітарний (mil.in.ua)
  - The War Zone → АрміяInform (armyinform.com.ua)
- **Спрощення логіки обробки**: Прибрано переклад англійських новин, оскільки всі джерела тепер українські
- **Покращена обробка зображень**: Додано спеціальну логіку для нових українських джерел

## [2024-01-XX] - Fix Health Check and Constructor Issues

## [2025-08-18] - Виправлення повітряних тривог, збору новин та Docker проблем

### 🚨 Повітряні тривоги
- **Додано групування відбоїв тривог**: коли 2 і більше тривог закінчуються за 1 хвилину, публікується одне повідомлення з переліком областей через кому
- **Приклад**: "✅ Відбій повітряної тривоги — Київська область, Полтавська область, Рівненська область"
- **Буфер для групування**: відбої зберігаються в буфері протягом 2 хвилин для можливості групування
- **Налаштування**: `MASS_END_THRESHOLD = 2` (мінімум областей), `MASS_END_TIME_WINDOW = 1` (хвилини)

### 📰 Збір новин
- **Виправлено проблему з публікацією тільки ТСН**: тепер зображення знаходяться з усіх джерел
- **Покращено пошук зображень**: додано більше селекторів та фільтрів для різних джерел
- **Фільтрація аналітичних URL**: автоматично відфільтровуються Facebook, Google Analytics та інші аналітичні посилання
- **Спеціальна обробка для ТСН**: додано логіку для пошуку зображень з домену img.tsn.ua

### 🐳 Docker та залежності
- **Виправлено помилку ResolutionImpossible**: створено окремі файли залежностей для різних середовищ
- **requirements.txt**: основні залежності для розробки з гнучкими версіями
- **requirements-docker.txt**: Docker-оптимізовані залежності з фіксованими версіями
- **Оновлений Dockerfile**: використовує Python 3.11-slim та стабільні залежності
- **Docker Compose**: додано docker-compose.yml для легшого запуску
- **.dockerignore**: оптимізація збірки Docker

### 🔧 Технічні зміни
- **Оновлено залежності**: закріплено сумісні версії httpx>=0.25.0,<0.28.0, httpcore>=1.0.0,<1.1.0, h11>=0.14.0,<0.15.0
- **Покращено логування**: детальні логи для відстеження роботи збору новин та тривог
- **Тести**: додано тести для перевірки логіки групування відбоїв тривог
- **Документація**: створено DOCKER_SETUP.md з детальними інструкціями

### 📊 Результати
- **Новини**: тепер знаходяться з 8+ джерел замість тільки ТСН
- **Тривоги**: групуються для кращої читабельності каналу
- **Стабільність**: виправлено помилки з AsyncClient та проксі
- **Docker**: виправлено конфлікти залежностей та додано стабільну збірку

## [2025-08-07] - Початкова версія

### 🚀 Основні функції
- Збір новин з RSS джерел
- Моніторинг повітряних тривог
- Публікація в Telegram канал
- Автоматичний переклад англійських новин
